CREATE TABLE SUPPLIER
(
    ID          NUMBER PRIMARY KEY,
    SUPPLIER_ID NUMBER NOT NULL UNIQUE,
    NAME        VARCHAR2(255) NOT NULL,
    EMAIL       VARCHAR2(255) NOT NULL UNIQUE,
    PHONE       VARCHAR2(50) NOT NULL UNIQUE,
    GSTIN       VARCHAR2(50) NOT NULL,
    -- Audit fields
    created_by  NUMBER(19,0) NOT NULL,
    updated_by  NUMBER(19,0),
    CREATED_AT  TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT  TIMESTAMP
);

CREATE TABLE ADDRESS
(
    ID          NUMBER PRIMARY KEY,
    SUPPLIER_ID NUMBER NOT NULL UNIQUE,
    FATHER_NAME VARCHAR2(255),
    STATE       VARCHAR2(100) NOT NULL,
    DISTRICT    VARCHAR2(100) NOT NULL,
    MANDAL      VARCHAR2(100) NOT NULL,
    VILLAGE     VARCHAR2(100) NOT NULL,
    POST        VARCHAR2(100) NOT NULL,
    PIN_CODE    VARCHAR2(20) NOT NULL,
    CONSTRAINT FK_SUPPLIER_ID_ADDRESS FOREIGN KEY (SUPPLIER_ID) REFERENCES SUPPLIER (SUPPLIER_ID)
);

-- Medicine table
CREATE TABLE medicine
(
    id          NUMBER(19,0) NOT NULL,
    item_id     VARCHAR2(50) NOT NULL,
    item_type   VARCHAR2(100) NOT NULL,
    name        VARCHAR2(255) NOT NULL,
    strength_mg NUMBER(10,0),
    company     VARCHAR2(255),
    expiry_date DATE,
    quantity    NUMBER(10,0),
    unit_price  NUMBER(19,2),
    total_value NUMBER(19,2),
    SUPPLIER_ID NUMBER(19,2),
    -- Audit fields
    created_by  NUMBER(19,0) NOT NULL,
    updated_by  NUMBER(19,0),
    created_at  TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at  TIMESTAMP,

    CONSTRAINT pk_medicine PRIMARY KEY (id),
    CONSTRAINT FK_SUPPLIER_ID_MEDICINE FOREIGN KEY (SUPPLIER_ID) REFERENCES SUPPLIER (SUPPLIER_ID),
    CONSTRAINT uq_medicine_item_id UNIQUE (item_id)
);

-- Sequence for ID
CREATE SEQUENCE SUPPLIER_SEQ START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
-- Sequence for medicine PK
CREATE SEQUENCE MEDICINE_SEQ START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
-- Sequence for ID
CREATE SEQUENCE ADDRESS_SEQ START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
