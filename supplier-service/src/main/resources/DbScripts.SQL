-- Sequence for primary key
CREATE SEQUENCE SUPPLIER_ID_SEQ
    START WITH 1
    INCREMENT BY 1 NOCACHE
    NOCYCLE;

CREATE TABLE SUPPLIER
(
    SUPPLIER_ID     NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    SUPPLIER_NAME   VARCHAR2(100) NOT NULL,
    PHONE_NUMBER    VARCHAR2(20),
    EMAIL           VARCHAR2(100),
    DRUG_LICENSE_NO VARCHAR2(50),
    GST_NO          VARCHAR2(50),
    CREATED_AT      TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UPDATED_AT      TIMESTAMP,
    CREATED_BY      NUMBER NOT NULL,
    UPDATED_BY      NUMBER,
    CONSTRAINT fk_supplier_created_by FOREIGN KEY (CREATED_BY) REFERENCES USERS (USER_ID),
    CONSTRAINT fk_supplier_updated_by FOREIGN KEY (UPDATED_BY) REFERENCES USERS (USER_ID)
);


-- Helpful indexes for faster search
CREATE INDEX IDX_CUSTOMER_NAME ON CUSTOMER (NAME);
CREATE INDEX IDX_CUSTOMER_PHONE ON CUSTOMER (PHONE);
CREATE INDEX IDX_CUSTOMER_EMAIL ON CUSTOMER (EMAIL);
CREATE INDEX IDX_CUSTOMER_CUSTID ON CUSTOMER (CUST_ID);
